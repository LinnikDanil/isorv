# ISORV - Interactive Survey Online Response System

ISORV - это система для создания и проведения интерактивных опросов в реальном времени. Она позволяет администраторам создавать опросы, вопросы и варианты ответов, а участникам - отвечать на вопросы через веб-интерфейс.

## Запуск приложения

Для запуска приложения и базы данных в Docker, убедитесь, что у вас установлен Docker и Docker Compose. Затем выполните следующие шаги:

1. Склонируйте репозиторий приложения на ваш локальный компьютер.
2. Перейдите в директорию проекта и соберите проект с помощью Maven или Gradle.
3. Запустите приложение и базу данных, используя команду:

```sh
docker-compose up --build
```

## Эндпоинты REST API

### Опросы

- **Создание опроса**
  - `POST /api/polls`
  - Тело запроса: `{"title": "Название опроса"}`
- **Получение опроса по ID**
  - `GET /api/polls/{pollId}`
- **Получение всех опросов**
  - `GET /api/polls`

### Вопросы

- **Добавление вопроса к опросу**
  - `POST /api/questions/{pollId}`
  - Тело запроса: `{"text": "Текст вопроса", "type": "Тип вопроса", "options": [{"text": "Текст варианта ответа"}]}`
- **Получение вопросов опроса**
  - `GET /api/questions/{pollId}`

### Варианты ответов

- **Добавление варианта ответа к вопросу**
  - `POST /api/options/{questionId}`
  - Тело запроса: `{"text": "Текст варианта ответа"}`
- **Получение вариантов ответа для вопроса**
  - `GET /api/options/{questionId}`

### Сессии опросов

- **Создание сессии опроса**
  - `POST /api/poll-session/create/{pollId}`
- **Переключение на следующий вопрос в сессии**
  - `PUT /api/poll-session/{sessionId}/next-question`
- **Завершение опроса**
  - `POST /api/poll-session/{sessionId}/complete-poll`
- **Добавление ответа**
  - `POST /api/poll-session/{sessionId}/response/{questionId}`
  - Тело запроса: `{"selectedOptionIds": [1, 2], "text": "Текст ответа"}`

## ВебСокеты

- **Подключение к сессии опроса для получения вопросов и ответов**
  - `ws://[HOST]:[PORT]/ws`
- **Подписка на вопросы и ответы**
  - Вопросы: `/topic/main/question/{sessionId}`
  - Ответы: `/topic/responses/{sessionId}`

## Важное

- Перед использованием системы убедитесь, что все конфигурации в `application.properties` корректно настроены для вашего окружения.
- Для запуска приложения в Docker обязательно соберите артефакт вашего приложения (например, с помощью Maven или Gradle).
